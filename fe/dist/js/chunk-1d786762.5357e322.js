(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d786762"],{"13d5":function(t,e,a){"use strict";var i=a("23e7"),s=a("d58f").left,n=a("a640"),o=a("2d00"),r=a("605d"),l=!r&&o>79&&o<83,c=l||!n("reduce");i({target:"Array",proto:!0,forced:c},{reduce:function(t){var e=arguments.length;return s(this,t,e,e>1?arguments[1]:void 0)}})},"14c3":function(t,e,a){"use strict";var i=a("c65b"),s=a("825a"),n=a("1626"),o=a("c6b6"),r=a("9263"),l=TypeError;t.exports=function(t,e){var a=t.exec;if(n(a)){var c=i(a,t,e);return null!==c&&s(c),c}if("RegExp"===o(t))return i(r,t,e);throw new l("RegExp#exec called on incompatible receiver")}},"64e3":function(t,e,a){},"8aa5":function(t,e,a){"use strict";var i=a("6547").charAt;t.exports=function(t,e,a){return e+(a?i(t,e).length:1)}},"8c85":function(t,e,a){"use strict";a("64e3")},d32e:function(t,e,a){"use strict";a.r(e);var i=a("2909"),s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("b-row",[e("b-col",{attrs:{md:"10"}},[e("div",{staticClass:"font-weight-bold fa-2x text-light"},[t._v("Food Order History")])])],1),e("hr",{staticClass:"mt-1"}),e("b-modal",{staticStyle:{height:"200px"},attrs:{id:"modal-add",size:"sm",title:"Update Order","hide-footer":""}},[e("div",[e("div",[e("b-button",{staticClass:"mb-2 mr-2 btnSmall2 btn-primary",attrs:{disabled:t.isNameWarning},on:{click:t.addRow}},[t._v("Add Item")]),e("hr",{staticClass:"mt-2 mb-2"}),e("table",{staticClass:"tableOne vgt-table"},[e("thead",{staticClass:"thead-dark"},[e("tr",[e("th",{staticStyle:{width:"30%"},attrs:{scope:"col"}},[t._v("Item")]),e("th",{attrs:{scope:"col"}},[t._v("Item Quantity")]),e("th",{attrs:{scope:"col"}},[t._v("Item Price")]),e("th",{attrs:{scope:"col"}},[t._v("Total Price")]),e("th",{attrs:{scope:"col"}},[t._v("Actions")])])]),e("tbody",t._l(t.item,(function(a,i){return e("tr",{key:i},[e("td",{},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.item,expression:"item.item"}],staticClass:"inputttt",staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"Enter item name",required:"",min:"0",oninput:"validity.valid||(value='');"},domProps:{value:a.item},on:{input:function(e){e.target.composing||t.$set(a,"item",e.target.value)}}})]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model.number",value:a.quantity,expression:"item.quantity",modifiers:{number:!0}}],staticClass:"inputttt",staticStyle:{width:"50%"},attrs:{type:"number",placeholder:"Enter quantity",min:"0",oninput:"validity.valid||(value='');"},domProps:{value:a.quantity},on:{input:[function(e){e.target.composing||t.$set(a,"quantity",t._n(e.target.value))},function(e){return t.calculateTotal(i)}],blur:function(e){return t.$forceUpdate()}}})]),e("td",{},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:a.item_price,expression:"item.item_price",modifiers:{number:!0}}],staticClass:"inputttt",staticStyle:{width:"50%"},attrs:{type:"number",placeholder:"Enter price",min:"0",oninput:"validity.valid||(value='');"},domProps:{value:a.item_price},on:{input:[function(e){e.target.composing||t.$set(a,"item_price",t._n(e.target.value))},function(e){return t.calculateTotal(i)}],blur:function(e){return t.$forceUpdate()}}})]),e("td",[e("b-row",[e("b-col",[t._v("₹ "+t._s(a.price)+"-/")])],1)],1),e("td",[e("span",{staticClass:"btn",on:{click:function(e){return t.deleteRow(i)}}},[e("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})])])])})),0),e("tfoot",[e("tr",[e("td",[e("div",[e("b-form-group",{attrs:{"label-for":"input-1"}},[e("b-form-select",{attrs:{required:""},on:{change:t.handleSelectionChangeDriver},model:{value:t.selectedOption,callback:function(e){t.selectedOption=e},expression:"selectedOption"}},[e("b-form-select-option",{attrs:{disabled:"",value:""}},[t._v("Select Driver")]),t._l(t.allDriverName,(function(a){return e("b-form-select-option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.fullName))])}))],2)],1)],1)]),e("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("Discount :")]),e("td",[e("div",{staticClass:"d-flex flex-row justify-content-center align-items-center"},[e("div",{staticClass:"pt-2"},["Absolute"===t.discountType?e("input",{directives:[{name:"model",rawName:"v-model",value:t.absoluteDiscount,expression:"absoluteDiscount"}],staticClass:"inputttt76",attrs:{type:"number",placeholder:"Enter discount",min:"0",oninput:"validity.valid||(value='');"},domProps:{value:t.absoluteDiscount},on:{input:function(e){e.target.composing||(t.absoluteDiscount=e.target.value)}}}):e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.discount,expression:"discount",modifiers:{number:!0}}],staticClass:"inputttt76",attrs:{type:"number",placeholder:"Enter discount ",min:"0",oninput:"validity.valid||(value='');"},domProps:{value:t.discount},on:{input:function(e){e.target.composing||(t.discount=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),e("div",{staticClass:"pt-2"},[e("b-form-select",{staticClass:"selectBorderless",attrs:{options:["Absolute","%"]},model:{value:t.discountType,callback:function(e){t.discountType=e},expression:"discountType"}})],1),"Absolute"!=t.discountType?e("div",{staticClass:"pt-2"},[t._v(" ₹ "+t._s(t.percentageAmount)+" ")]):t._e()])])]),e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"4"}},[e("b-row",[e("b-col",[t._v(" Sub Total : ")])],1)],1),e("td",[t._v(" ₹ "+t._s(t.subtotal)+"-/ ")])]),e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"4"}},[e("b-row",[e("b-col",[t._v(" GST : ")])],1)],1),e("td",[t._v(" ₹ "+t._s(null!=t.gstAmount?t.gstAmount:0)+"-/ ")])]),e("tr",[e("td",{staticClass:"text-right inputtttNone",attrs:{colspan:"4"}},[t._v(" Delivery Charge : ")]),e("td",[e("b-form-group",{staticClass:"col-md-6",attrs:{"label-for":"input-food-delivery"}},[e("b-form-input",{attrs:{required:"",placeholder:"00"},model:{value:t.food_delivery_charge,callback:function(e){t.food_delivery_charge=e},expression:"food_delivery_charge"}})],1)],1)]),e("tr",[e("td",{staticClass:"text-right inputtttNone",attrs:{colspan:"4"}},[e("b-row",[e("b-col",[t._v(" Total Amount : ")])],1)],1),e("td",[e("b-row",[e("b-col",[t._v(" ₹ "+t._s(t.totalAmount)+"-/ ")])],1)],1)])])])],1),e("div",{staticClass:"d-flex justify-content-end pt-2"},[t.updateloader?e("div",{staticClass:"spinner spinner-primary mr-3"}):t._e(),e("b-row",[e("b-col",[e("b-button",{staticClass:"mb-2 btnSmall",on:{click:t.clickCancelAmount2}},[t._v("Cancel")]),t.updateloader?t._e():e("b-button",{staticClass:"mb-2 btnSmall ml-2",attrs:{variant:"primary ripple",disabled:t.isNameWarning||""===t.selectedOption},on:{click:function(e){return t.clickUpdateAmount()}}},[t._v("Update order & send notification")])],1)],1)],1)])]),e("b-modal",{staticStyle:{height:"200px"},attrs:{id:"modal-item-view",size:"lg",title:"Update Order","hide-header":""}},[e("b-row",[e("b-col",[e("vue-good-table",{attrs:{columns:t.getitemColumns,"line-numbers":!1,"pagination-options":{enabled:!0,mode:"records"},styleClass:"tableOne vgt-table",selectOptions:{enabled:!1,selectionInfoClass:"table-alert__box"},"sort-options":{enabled:!1},rows:t.getitemRows},scopedSlots:t._u([{key:"table-row",fn:function(a){return["show-price"===a.column.field?e("span",[e("div",{on:{click:function(e){return t.clickViewProfile(a.row.userId)}}},[e("p",{staticClass:"m-0 ul-cursor--pointer text-primary",staticStyle:{"text-decoration":"underline"}},[t._v(" "+t._s(a.row.user_name)+" ")])])]):t._e()]}}])})],1),e("b-col",{staticClass:"mt-3",attrs:{md:"12"}},[e("div",{staticClass:"d-flex justify-content-between px-2"},[t.selectedOption?e("b-form-group",{attrs:{label:"Assigned Driver","label-for":"input-1"}},[e("b-form-select",{attrs:{disabled:"",required:""},model:{value:t.selectedOption,callback:function(e){t.selectedOption=e},expression:"selectedOption"}},[e("b-form-select-option",{attrs:{disabled:"",value:t.selectedOption}},[t._v(t._s(t.selectedOption))]),t._l(t.allDriverName,(function(a){return e("b-form-select-option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.fullName))])}))],2)],1):t._e(),e("div",{staticClass:"d-flex flex-column"},[e("span",[t._v("Delivery charge : ₹ +"+t._s(t.getDeliveryCharge)+"-/")]),e("span",[t._v("GST : ₹ +"+t._s(t.getGsttax)+"-/")]),1==this.getdiscountType?e("span",[t._v("Discount : ₹ -"+t._s(t.getDiscount)+"-/")]):e("span",[t._v(" Discount : -"+t._s(t.getDiscount)+"%")]),e("span",[t._v("Total : ₹ "+t._s(t.getTotalPrice)+"-/")])])],1)])],1)],1),e("b-modal",{staticStyle:{height:"100px"},attrs:{id:"modal-cancelReason",size:"md",title:"Reason for cancellation:","hide-footer":"","hide-header":"",centered:""}},[e("b-row",{staticClass:"p-3"},[e("b-col",{attrs:{md:"12"}},[e("i",{staticClass:"fa fa-exclamation-triangle text-danger mb-3",attrs:{"aria-hidden":"true"}},[t._v(" Reason for cancellation: ")])]),e("b-col",{attrs:{md:"12"}},[e("b-form-group",{attrs:{label:"","label-for":"input-2"}},[e("b-form-textarea",{staticStyle:{height:"100px"},attrs:{required:"",placeholder:"Reason for cancellation"},model:{value:t.cancelReasonText,callback:function(e){t.cancelReasonText=e},expression:"cancelReasonText"}})],1)],1),e("b-col",[e("div",{staticClass:"d-flex justify-content-end px-2"},[t.updateloader?e("div",{staticClass:"spinner spinner-primary mr-3"}):t._e(),e("b-button",{staticClass:"mb-2 mr-2",on:{click:function(e){return t.clickCancle()}}},[t._v("Cancel")]),e("b-button",{staticClass:"mb-2 mr-2",attrs:{variant:"primary ripple"},on:{click:function(e){return t.clickCancleButton()}}},[t._v("ok")])],1)])],1)],1),e("b-modal",{staticStyle:{height:"100px"},attrs:{id:"modal-asign-driver",size:"md",title:"Asign Driver","hide-header":"","hide-footer":"",centered:""}},[e("b-row",{staticClass:"p-2"},[e("b-col",{attrs:{md:"12"}},[e("i",{staticClass:"fa fa-exclamation-triangle text-danger mb-3",attrs:{"aria-hidden":"true"}},[t._v(" Asign Driver: ")])]),e("b-col",{attrs:{md:"6"}},[e("b-form-group",{staticClass:"pattingInSelect",attrs:{"label-for":"input-1"}},[e("b-form-select",{attrs:{required:""},on:{change:t.handleSelectionChangeDriver},model:{value:t.selectedOption,callback:function(e){t.selectedOption=e},expression:"selectedOption"}},[e("b-form-select-option",{attrs:{disabled:"",value:""}},[t._v("Select Driver")]),t._l(t.allDriverName,(function(a){return e("b-form-select-option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.fullName))])}))],2)],1)],1),e("b-col",{attrs:{md:"12"}},[e("div",{staticClass:"d-flex justify-content-end px-2"},[t.updateloader?e("div",{staticClass:"spinner spinner-primary mr-3"}):t._e(),e("b-button",{staticClass:"mb-2 mr-2",on:{click:function(e){return t.clickCancle()}}},[t._v("Cancel")]),e("b-button",{staticClass:"mb-2",attrs:{variant:"primary ripple"},on:{click:function(e){return t.clickUpdateAsignDriver()}}},[t._v("Update")])],1)])],1)],1),e("b-row",{staticClass:"my-2"},["Admin"===this.role?e("b-col",{staticStyle:{"padding-right":"15px !important","padding-left":"15px !important"},attrs:{md:"3"}},[e("multiselect",{attrs:{placeholder:"Select users",options:Object(i["a"])(t.allUsers),multiple:!1,limit:1},on:{input:t.handleChange},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1):t._e(),e("b-col",{staticClass:"for-gap",attrs:{md:"3"}},[e("multiselect",{attrs:{placeholder:"Payment Status",options:["All","Paid","Unpaid"],multiple:!1,limit:1},on:{input:t.handleChangeCar},model:{value:t.payment_status,callback:function(e){t.payment_status=e},expression:"payment_status"}})],1),e("b-col",{attrs:{md:"2"}},[e("v2-datepicker",{ref:"startDate",staticClass:"for-date-picker",attrs:{lang:"en","picker-options":{disabledDate:function(t){return t.getTime()>(new Date).getTime()}},placeholder:"Select Start date"},on:{change:function(e){return t.onDateSelected()}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),e("b-col",{staticClass:"for-gaps",attrs:{md:"2"}},[e("v2-datepicker",{ref:"endDate",staticClass:"for-date-picker",attrs:{lang:"en","picker-options":{disabledDate:function(t){return t.getTime()>(new Date).getTime()}},placeholder:"Select End date"},on:{change:function(e){return t.onEndDateSelected()}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),e("div",{staticClass:"col-md-2 d-flex flex-row for-gap justify-content-end"},[e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.clearFilters()}}},[t._v(" Clear Filter ")])])],1),e("vue-good-table",{attrs:{columns:t.getDynamicColumns(),"line-numbers":!1,"pagination-options":{enabled:!0,mode:"records"},styleClass:"tableOne vgt-table",selectOptions:{enabled:!1,selectionInfoClass:"table-alert__box"},"sort-options":{enabled:!1},rows:"all"===t.payment_status.toLowerCase()?t.rows:t.filteredRows},scopedSlots:t._u([{key:"table-row",fn:function(a){return["user_name_show"===a.column.field?e("span",[e("div",{on:{click:function(e){return t.clickViewProfile(a.row.userId)}}},[e("p",{staticClass:"m-0 ul-cursor--pointer text-primary",staticStyle:{"text-decoration":"underline"}},[t._v(" "+t._s(a.row.user_info.first_name)+" "+t._s(a.row.user_info.last_name)+" ")])])]):"show_more_data_admin"===a.column.field?e("span",[[e("div",{staticClass:"d-flex flex-column"},[e("div",{staticClass:"d-flex"},[t._v(" "+t._s(a.row.registration_number)+" ")]),e("div",[e("ul",{staticClass:"d-flex mb-0 pb-2 pl-0 ml-0 flex-wrap list-unstyled"},[e("li",{staticClass:"p-0 m-0"},[t._v(" "+t._s(a.row.brand)+" ("+t._s(a.row.model)+") ")])])])])]],2):"show_more_data"===a.column.field?e("span",[[e("div",{staticClass:"d-flex flex-column"},[e("div",[e("ul",{staticClass:"d-flex mb-0 pb-2 pl-0 ml-0 flex-wrap list-unstyled"},[e("li",{staticClass:"p-0 m-0"},[t._v(" "+t._s(a.row.brand)+" ("+t._s(a.row.model)+") ")])])])])]],2):"for_driver_show"===a.column.field?e("span",[[a.row.assign_driver_id?e("b-badge",{staticClass:"p-2",attrs:{variant:"success"}},[t._v(" "+t._s(a.row.assign_driver_id))]):e("b-button",{attrs:{variant:"primary",ripple:""},on:{click:function(e){return t.clickAsignDriver(a.row)}}},[t._v("Asign driver")])]],2):"show_date"===a.column.field?e("span",[[e("div",[e("div",[e("b",[t._v("From :")]),t._v(" "+t._s(a.row.booking_date))]),e("div",[e("b",[t._v("To :")]),t._v(" "+t._s(a.row.end_date))])])]],2):"payment_status"===a.column.field?e("span",[["Paid"===a.row.payment_status?e("b-badge",{attrs:{variant:"success"}},[t._v(t._s(a.row.payment_status))]):"Unpaid"===a.row.payment_status?e("b-badge",{attrs:{variant:"danger"}},[t._v(t._s(a.row.payment_status))]):"COD"===a.row.payment_status?e("b-badge",{attrs:{variant:"warning"}},[t._v(t._s(a.row.payment_status))]):t._e()]],2):"show_action"===a.column.field?e("span",[[0===a.row.price?e("b-button",{attrs:{variant:"primary",ripple:""},on:{click:function(e){return t.clickCancleBookingAmount(a.row.id)}}},[t._v("Amount")]):t._e(),a.row.price>0?e("b-button",{attrs:{variant:"primary",ripple:""},on:{click:function(e){return t.clickItemInfo(a.row)}}},[t._v("See Update Order")]):e("b-button",{attrs:{variant:"primary",ripple:""},on:{click:function(e){return t.clickCancleBookingAmount(a.row)}}},[t._v("Update Order")])]],2):"show_Status"===a.column.field?e("span",[[t.formData.fName&&t.formData.lName&&t.formData.aadharImage&&t.formData.drivingLicenseImage?e("div",[e("span",{staticClass:"text-white m-0",staticStyle:{"font-size":"14px"}},[e("span",{staticClass:"badge bg-success p-2 blueVerfiyred"},[t._v("Booking Confirmed"),e("i",{staticClass:"fa fa-check-circle blueVerfiy2red",staticStyle:{"padding-left":"4px"},attrs:{"aria-hidden":"true"}})])])]):e("div",[e("span",{staticClass:"text-white m-0",staticStyle:{"font-size":"14px"}},[e("span",{staticClass:"badge bg-danger p-2 blueVerfiyred"},[t._v("Profile Update Pending"),e("i",{staticClass:"fa fa-check-circle blueVerfiy2red",staticStyle:{"padding-left":"4px"},attrs:{"aria-hidden":"true"}})])])])]],2):"show_more_days"===a.column.field?e("span",[[e("div",{staticClass:"d-flex flex-row",staticStyle:{gap:"8px"}},t._l(a.row.audio_url,(function(i,s){return e("span",{key:s},[e("i",{staticClass:"fa fa-volume-up fa-2x",staticStyle:{color:"grey",opacity:"0.5"},attrs:{id:"playPauseIcon_"+a.row.id+"_"+s},on:{click:function(e){return t.toggleAudio(s,a.row.id)}}}),e("audio",{key:s,staticStyle:{height:"36px !important"},attrs:{id:"audio_"+a.row.id+"_"+s,controls:"",hidden:""}},[e("source",{attrs:{src:i,type:"audio/mp3"}}),t._v(" Your browser does not support the audio tag. ")])])})),0)]],2):"fasTag"===a.column.field?e("span",[[e("div",{staticClass:"d-flex flex-column"},[e("div",{staticClass:"d-flex"},[t._v(" Fastag - "),a.row.fast_tag_amount?e("p",{staticClass:"text-success p-0 mb-0 ml-2",attrs:{variant:"primary ripple"}},[t._v(" ₹ "+t._s(a.row.fast_tag_amount)+"/- ")]):e("p",{staticClass:"text-danger p-0 mb-0 ml-2",attrs:{variant:"primary ripple"}},[t._v(" No ")])]),e("div",{staticClass:"d-flex"},[t._v(" Incidental Coverage - "),a.row.trip_insurance_amount?e("p",{staticClass:"text-success p-0 mb-0 ml-2",attrs:{variant:"primary ripple"}},[t._v(" ₹ "+t._s(a.row.trip_insurance_amount)+"/- ")]):e("p",{staticClass:"text-danger p-0 mb-0 ml-2",attrs:{variant:"primary ripple"}},[t._v(" No ")])])])]],2):"door_pickup_show"===a.column.field?e("span",[[e("div",{staticClass:"d-flex flex-column"},[a.row.door_pickup_amount>0?e("div",{staticClass:"d-flex"},[t._v(" Door Pickup - "),e("p",{staticClass:"text-success p-0 mb-0 ml-2",attrs:{variant:"primary ripple"}},[t._v(" ₹ "+t._s(a.row.door_pickup_amount)+"/- ")])]):e("div",{staticClass:"d-flex"},[t._v(" Self Pickup - "),e("p",{staticClass:"text-success p-0 mb-0 ml-2",attrs:{variant:"primary ripple"}},[t._v(" "+t._s(a.row.self_pickup)+" ")])])])]],2):"price_show"===a.column.field?e("span",[[e("p",[t._v(t._s(a.row.price))])]],2):t._e()]}}])}),t.loader?e("div",{staticClass:"spinner spinner-primary",attrs:{id:"loader"}}):t._e()],1)},n=[],o=a("5530"),r=a("ade3"),l=(a("99af"),a("4de4"),a("7db0"),a("d81d"),a("14d9"),a("13d5"),a("fb6a"),a("a434"),a("b680"),a("b64b"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("159b4"),a("c1df")),c=a.n(l),d=a("b654"),u=a.n(d),m=a("8e5f"),p=a.n(m),f=a("2ef0"),h=a.n(f),v={metaInfo:{title:"Car-Booking"},components:{multiselect:p.a},props:["row"],data:function(){var t;return t={getitemColumns:[{label:"Item Name",field:"item"},{label:"Item Price",field:"item_price"},{label:"Quantity",field:"quantity"},{label:"Price",field:"price"}],getitemRows:[],getTotalPrice:"",getDiscount:"",getdiscountType:"",getGsttax:"",getDeliveryCharge:"",maxDate:new Date,selected:null,allUsers:[],formData:{fName:"",lName:"",aadharImage:"",drivingLicenseImage:""},allCars:[],selectCar:null,startDate:"",endDate:"",book_id:"",updateloader:!1,amount:"",transactionId:"",types:"",userId:"",role:"",cancelReasonText:"",cancelReason:["first resion","second resion","third resion"],usersInfo:[],carsInfo:[],matchUser:"",rows:[],form:{templateId:"",name:"",content:""},selectedOption:"",generateIDloader:!1,submitloader:!1,isEdit:!1,loader:!1,isHide:!1,isPlaying:!1,audio:null},Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(t,"isPlaying",!1),"amount",null),"payment_status","All"),"filteredRows",[]),"filteredData",[]),"item",[{BookingId:this.order_id,item:"",quantity:0,item_price:0,price:0}]),"previousData",[]),"updateloader",!1),"discount",0),"absoluteDiscount",0),Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(t,"gstAmount",null),"totalAmountsub",0),"food_delivery_charge",0),"getOrderId",0),"allDriverName",[]),"discountType","Absolute"),"percentageAmount",0)},computed:{totalPrice:function(){return this.item.quantity*this.item_price},totalAmount:function(){var t=this.item.reduce((function(t,e){return t+e.price}),0);if(this.discount>0){var e=t*(this.discount/100);return this.percentageAmount=parseFloat(e.toFixed(2)),this.percentageAmount=this.subtotal<=this.percentageAmount?this.subtotal:this.percentageAmount,t-=this.percentageAmount,t+=this.gstAmount>0?this.gstAmount:0,t+parseInt(this.food_delivery_charge)}return this.percentageAmount=0,t-=this.absoluteDiscount,t+=this.gstAmount>0?this.gstAmount:0,t+parseInt(this.food_delivery_charge)},subtotal:function(){var t=this.item.reduce((function(t,e){return t+e.price}),0);return t},isNameWarning:function(){return this.item.some((function(t){return!t.item}))}},mounted:function(){this.addCssRule()},watch:{item:{handler:function(t){},deep:!0},discountType:function(t){"Absolute"===t?this.discount=0:"%"===t&&(this.absoluteDiscount=0)}},created:function(){var t=localStorage.getItem("userInfo"),e=JSON.parse(t);this.role=e.data.role,this.getProfileDetails(),this.getAllTransaction(),this.getGstAmount(),this.getAllUsers(),addCssRule(),this.filteredRows=this.rows},methods:{calculateTotal:function(t){var e=this.item[t];e.price=e.quantity*e.item_price},clickAsignDriver:function(t){this.getOrderId=t.id,this.$bvModal.show("modal-asign-driver"),this.getAllUsers(t)},handleSelectionChangeDriver:function(t){console.log(t)},clickUpdateAsignDriver:function(){var t=this;this.loader=!0;var e={driver_id:this.selectedOption,order_id:this.getOrderId};this.$apiService.postCall("driverAssign/",e).then((function(e){e.error?(t.loader=!1,t.$toaster.makeToast("warning","Update driver asign failed")):(t.$toaster.makeToast("success","Update driver asign successfully"),t.$bvModal.hide("modal-asign-driver"),t.getAllTransaction(),t.loader=!1)})).catch((function(e){t.$toaster.makeToast("warning",u.a.ERROR_MESSAGE),t.loader=!1}))},addRow:function(){this.previousData.push(this.item.slice()),this.item.push({BookingId:this.order_id,item:"",quantity:0,item_price:0,price:0})},deleteRow:function(t){this.item.splice(t,1),this.recalculateTotal()},recalculateTotal:function(){this.totalAmount=this.item.reduce((function(t,e){return t+e.price}),0),this.applyDiscount()},applyDiscount:function(){var t=this.totalAmount*(this.discountPercentage/100);this.totalAmount-=t},clearFilters:function(){this.startDate=null,this.endDate=null,this.matchUser="Select Users",this.selectCar=null,this.payment_status="All",window.location.reload()},openModal:function(t){this.$bvModal.show("modal-attachment")},formatPrice:function(t){var e=(t/1).toFixed(0).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},cancelReasonChange:function(t){this.cancelReasonText=t},clickCancle:function(){this.$bvModal.hide("modal-cancelReason"),this.$bvModal.hide("modal-asign-driver"),this.$bvModal.hide("modal-attachment")},clickCancelAmount2:function(){this.item=[],this.item_price=0,this.quantity=0,this.discount=0,this.absoluteDiscount=0,this.$bvModal.hide("modal-add"),this.$bvModal.hide("modal-attachment")},clickCancleButton:function(){this.cancelReasonText&&this.cancelReasonText.length>=10?this.cancleYourBooking():this.$toaster.makeToast("warning","Please enter a cancel reason with at least 10 characters")},clickCancleButtonAmount:function(){},clickUpdateAmount:function(){var t=this;this.loader=!0;var e=this.order_id;if(!this.totalAmount||isNaN(this.totalAmount)||this.totalAmount<0||this.item.some((function(t){return!t.price||isNaN(t.price)})))return this.$toaster.makeToast("warning","Please enter valid discount amount"),void(this.loader=!1);var a=this.gstAmount>0?this.gstAmount:0,i=this.absoluteDiscount>0?"True":"False",s={orderId:e,final_amount:this.totalAmount,delivery_charge:this.food_delivery_charge,discount:this.discount>0?this.discount:this.absoluteDiscount>0?this.absoluteDiscount:0,gst_tax:a,sub_total:this.subtotal,discount_type:i,orders:this.item.map((function(t,a){return Object(o["a"])(Object(o["a"])({},t),{},{BookingId:e})}))};this.$apiService.postCall("updateOrder/",s).then((function(e){t.getAllTransaction(),t.amount="",t.clickCancelAmount2(),t.clickSendNotification(),t.clickUpdateAsignDriver(),t.$toaster.makeToast("success","Order Is Updated")})).catch((function(e){console.error(e),t.$toaster.makeToast("warning",u.a.ERROR_MESSAGE),t.loader=!1,t.loader=!1}))},clickViewProfile:function(t){this.$router.push("/app/myDesk/usersProfile?id="+t)},getGstAmount:function(){var t=this;this.loader=!0,this.$apiService.getCall("appSetting/?key=gst_tax").then((function(e){if(e.error)t.$toaster.makeToast("warning",u.a.ERROR_MESSAGE),t.loader=!1;else{var a=e.apidata;t.gstAmount=a.value,t.loader=!1}})).catch((function(e){t.$toaster.makeToast("warning",u.a.ERROR_MESSAGE),t.loader=!1}))},clickCancleBooking:function(t){this.book_id=t,this.$bvModal.show("modal-cancelReason")},clickCancleBookingAmount:function(t){this.userId=t.userId,this.order_id=t.id,this.$bvModal.show("modal-add"),this.getOrderId=t.id,this.getAllUsers(t)},cancleBooking:function(t,e,a,i){var s=this;this.$swal({title:"Are you sure?",text:"You won't to cancel this booking!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Cancel it!"}).then((function(e){if(s.loader=!0,e.value){s.$swal("Cancel Booking!","Your car Booking has been Cancel.","success");s.$apiService.getCall("cancel/?book_id="+t).then((function(t){t.apidata.isError||(s.$toaster.makeToast("success","This car booking cancel successfully"),setTimeout((function(){window.location.reload()}),700),s.loader=!1)}))}})).catch((function(t){s.$toaster.makeToast("warning","User can't Cancel! Srever failed"),s.loader=!1}))},downloadPDF:function(t){var e="payment_summary.pdf",a=document.createElement("a");a.href=t,a.download=e,a.target="_blank",a.click()},clickBookCar:function(){this.$router.push("/app/sessions/searchCar")},getSearchOptions:function(){return"Admin"===this.role?{enabled:!0,placeholder:"Search"}:{enabled:!1}},handleStartDate:function(){},onDateSelected:function(t){},onEndDateSelected:function(t){this.startDate=c()(this.startDate).format("YYYY-MM-DD"),this.endDate=c()(this.endDate).format("YYYY-MM-DD"),this.getAllTransaction(this.startDate,this.endDate,this.matchUser.id,this.selectCar)},handleChange:function(t){this.matchUser=this.usersInfo.find((function(e){return e.fullName==t})),null!==this.matchUser&&this.getAllTransaction(this.startDate,this.endDate,this.matchUser.id,this.selectCar)},handleChangeCar:function(t){t||(t="all"),"all"===t.toLowerCase()?this.filteredRows=this.rows:this.filteredRows=this.rows.filter((function(e){return e.payment_status.toLowerCase()===t.toLowerCase()}))},handleTextInput:h.a.debounce((function(){this.getAllTransaction(this.startDate)}),700),getDynamicColumns:function(){var t=[{label:"Ordered date",field:"created_at"},{label:"Ordered ID",field:"id"},{label:"Audio File",field:"show_more_days"},{label:"Amount",field:"price_show"},{label:"Status",field:"show_action"},{label:"Payment Status",field:"payment_status"}];return"User"===this.role?[{label:"Model(brand)",field:"show_more_data"}].concat(t,[{label:"Status",field:"show_Status"}]):[{label:"User name",field:"user_name_show"}].concat(t)},clickPay:function(){window.location.href=this.$apiService.getAppendedUrl("depositApiView/?userId=".concat(this.userId,"&amount=").concat(this.amount))},clickDeposit:function(){this.$bvModal.show("modal-attachment")},getAllUsers:function(t){var e=this;this.loader=!0,this.$apiService.getCall("account/").then((function(a){var i=[];if(a.apidata.length>0&&(i=a.apidata,i=a.apidata.filter((function(t){return!t.is_superuser})),i=a.apidata.filter((function(t){return null!==t.first_name&&null!==t.last_name})),i.forEach((function(t){t.full_name=t.first_name||t.last_name?t.first_name+" "+t.last_name:""}))),t){var s=a.apidata.filter((function(t){return"Driver"===t.role}));s=s.filter((function(t){return null!==t.first_name&&null!==t.last_name})),e.allDriverName=s.map((function(t){return{id:t.id,fullName:t.full_name}}))}e.allUsers=i.map((function(t){return t.full_name})),e.usersInfo=i.map((function(t){return{id:t.id,fullName:t.full_name}})),e.loader=!1})).catch((function(t){e.$toaster.makeToast("warning",u.a.ERROR_MESSAGE),e.loader=!1}))},getAllTransaction:function(t,e,a,i){var s=this;this.loader=!0;var n="";t&&(n+="startDate=".concat(t)),e&&(n+="&endDate=".concat(e)),a&&(n+="&userId=".concat(a)),i&&(n+="&reg_number=".concat(i)),this.$apiService.getCall("bookingHistory/?".concat(n)).then((function(t){var e=[];t.apidata.length>0&&("User"===s.role?(s.allDate=t.apidata.map((function(t){return t.time})),e=t.apidata.filter((function(t){if(t.userId==s.userId)return t.userId}))):e=t.apidata,e.forEach((function(t){t.created_at=t.created_at?c()(t.created_at).format("DD MMM YYYY h:mm A"):""}))),s.rows=e,s.loader=!1})).catch((function(t){s.$toaster.makeToast("warning",u.a.ERROR_MESSAGE),s.loader=!1}))},clickItemInfo:function(t){this.$bvModal.show("modal-item-view"),this.getitemRows=t.orderItem,this.getTotalPrice=t.price,this.getDiscount=t.discount,this.getGsttax=t.gst_tax,this.getDeliveryCharge=t.door_pickup_amount,this.getdiscountType=t.discount_type,this.selectedOption="".concat(t.driver.first_name," ").concat(t.driver.last_name)},clearform:function(){this.form={},this.isEdit=!1,this.submitloader=!1,this.generateIDloader=!1,this.$bvModal.hide("modal-lg")},togglePlay:function(t){this.audio&&this.audio.src===t?this.audio.paused?this.audio.play():this.audio.pause():(this.audio_url=t,this.audio=new Audio(t),this.audio.play())},toggleAudio:function(t,e){var a=document.querySelectorAll("audio");document.querySelectorAll('[id^="playPauseIcon_"]');a.forEach((function(a){if(a.id!=="audio_".concat(e,"_").concat(t)&&!a.paused){a.pause();var i=document.querySelector("#playPauseIcon_".concat(a.id.split("_")[1],"_").concat(a.id.split("_")[2]));i&&(i.style.opacity=".5")}}));var i=document.getElementById("audio_".concat(e,"_").concat(t)),s=document.querySelector("#playPauseIcon_".concat(e,"_").concat(t));i.paused?(i.play(),s.style.opacity="1"):(i.pause(),s.style.opacity=".5")},addCssRule:function(){var t=document.createElement("style");t.type="text/css";var e="#modal-add___BV_modal_content_{  right: 330px !important;}";t.appendChild(document.createTextNode(e)),document.head.appendChild(t)},clickSendNotification:function(){var t=this;if(!this.totalAmount||isNaN(this.totalAmount)||this.totalAmount<0||this.item.some((function(t){return!t.price||isNaN(t.price)})))return this.$toaster.makeToast("warning","Please enter valid discount amount"),void(this.loader=!1);this.loader=!0,this.$apiService.getCall("sendNotification/?user_id=".concat(this.userId)).then((function(e){t.loader=!0,e.data&&e.data.success,t.$toaster.makeToast("success","Notification is send successfully"),t.loader=!1})).catch((function(e){t.$toaster.makeToast("error","Failed to send notification"),t.loader=!1}))}}},b=v,_=(a("f0ed"),a("8c85"),a("2877")),g=Object(_["a"])(b,s,n,!1,null,null,null);e["default"]=g.exports},d58f:function(t,e,a){"use strict";var i=a("59ed"),s=a("7b0b"),n=a("44ad"),o=a("07fa"),r=TypeError,l="Reduce of empty array with no initial value",c=function(t){return function(e,a,c,d){var u=s(e),m=n(u),p=o(u);if(i(a),0===p&&c<2)throw new r(l);var f=t?p-1:0,h=t?-1:1;if(c<2)while(1){if(f in m){d=m[f],f+=h;break}if(f+=h,t?f<0:p<=f)throw new r(l)}for(;t?f>=0:p>f;f+=h)f in m&&(d=a(d,m[f],f,u));return d}};t.exports={left:c(!1),right:c(!0)}},d784:function(t,e,a){"use strict";a("ac1f");var i=a("c65b"),s=a("cb2d"),n=a("9263"),o=a("d039"),r=a("b622"),l=a("9112"),c=r("species"),d=RegExp.prototype;t.exports=function(t,e,a,u){var m=r(t),p=!o((function(){var e={};return e[m]=function(){return 7},7!==""[t](e)})),f=p&&!o((function(){var e=!1,a=/a/;return"split"===t&&(a={},a.constructor={},a.constructor[c]=function(){return a},a.flags="",a[m]=/./[m]),a.exec=function(){return e=!0,null},a[m](""),!e}));if(!p||!f||a){var h=/./[m],v=e(m,""[t],(function(t,e,a,s,o){var r=e.exec;return r===n||r===d.exec?p&&!o?{done:!0,value:i(h,e,a,s)}:{done:!0,value:i(t,a,e,s)}:{done:!1}}));s(String.prototype,t,v[0]),s(d,m,v[1])}u&&l(d[m],"sham",!0)}}}]);